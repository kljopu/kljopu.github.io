---
title: "ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸ 6"
categories:
  - Object_Oriented_Programing
tags:
  - ê°ì²´ì§€í–¥
  - ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸
date: "2021-11-18 23:42:14"
last_modified_at: "2021-11-18 23:42:14 +0800"
toc: true
toc_sticky: true
toc_label: Table of Contents
---

ğŸ’¡ **ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸ ì‹œë¦¬ì¦ˆ**
<br><br> ì¸í”„ëŸ°ì˜ [ê°ì±„ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸](https://www.inflearn.com/course/%EA%B0%9D%EC%B2%B4-%EC%A7%80%ED%96%A5-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%9E%85%EB%AC%B8)ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•œ ê²Œì‹œë¬¼ ì…ë‹ˆë‹¤.
<br> **(ë³¸ ì‹œë¦¬ì¦ˆì˜ ëª¨ë“  ì˜ˆì‹œëŠ” JavaScript(TypeScript)ë¡œ ë³€í™˜í•˜ì—¬ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.)**
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸_1](https://kljopu.github.io/object_oriented_programing/oop_start_1/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸_2](https://kljopu.github.io/object_oriented_programing/oop_start_2/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸\_3](https://kljopu.github.io/object_oriented_programing/oop_start_3/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸\_4](https://kljopu.github.io/object_oriented_programing/oop_start_4/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸\_5](https://kljopu.github.io/object_oriented_programing/oop_start_5/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸\_6](https://kljopu.github.io/object_oriented_programing/oop_start_6/)
<br> [ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë° ì…ë¬¸\_7](https://www.notion.so/_7-35065f3f7f65490cada89ccfe6825d28)
{: .notice--info}

<br>

> "ì¶”ìƒí™” ì˜ˆì œ"
> 

### ì¶”ìƒí™” ì˜ˆì œ 1

- ê¸°ëŠ¥ ì˜ˆì‹œ
    - í´ë¼ìš°ë“œ íŒŒì¼ í†µí•© ê´€ë¦¬ ê¸°ëŠ¥ ê°œë°œ
    - ëŒ€ìƒ í´ë¼ìš°ë“œ: ë“œë¡­ë°•ìŠ¤, ë°•ìŠ¤
    - ì£¼ìš” ê¸°ëŠ¥: ê° í´ë¼ìš°ë“œ íŒŒì¼ ëª©ë¡ ì¡°íšŒ, ë‹¤ìš´ë¡œë“œ, ì—…ë¡œë“œ, ì‚­ì œ, ê²€ìƒ‰

ì¶”ìƒí™” í•˜ì§€ ì•Šì€ ê²½ìš°

```tsx
public enum CloudId {
	DROPBOX = 'DROPBOX';
	BOX = 'BOX';
}
public class FileInfo {
    private cloudId: CloudId;
    private fileId: string;
    private name: string;
    private lengh: number;

    //	... get ë©”ì„œë“œ
}

public class CloudFileManager {
    public getFileInfos(cloudId: CloudId): FileInfo[] {
        if(cloudId === CloudId.DROPBOX) {
            const dc: DropboxClient = ...;
            const dbFiles: DbFile[] = db.getFiles();
            const result: FileInfo[] = [];
            for (var i =0; var < dbFiles.length; i++) {
                const fi: FileInfo = new FileInfo();
                fi.setCloudId(CloudId.DROPBOX);
                fi.setFileId(fi.getFileId);
                ...
                result.push(fi);
            }
            return result;
        } else if(cloudId === CloudId.BOX) {
            const boxSvc: BoxService = ...;
        }
    }
}

public download(file: FileInfo, localTarget: File): void {
    if(file.getCloudId() === CloudId.DROPBOX) {
        const dc: DropboxClient = ...;
        const out: FileOutputStream = new FileOutputStream(localTarget);
        dc.copy(file.getFiledId(), out);
        out.close();
    } else if(file.getCloudId() === CloudId.BOX) {
        const boxSvc: BoxService = ...;
        const is:InputStream = boxSvc.getInputStream(file.getId());
        const out:FileOutputStream = new FileOuptputStream(localTarget);
        CopyUtil.copy(is, out);
    }
}

// ë§Œì•½ í´ë¼ìš°ë“œê°€ ì¶”ê°€ ëœë‹¤ë©´??
public getFileInfos(cloudId: CloudId): Fileinfo[] {
    if(cloudId === CloudId.DROPBOX) {
        ...
    } else if(cloudId === CloudId.BOX) {
        ...
    } else if(cloudId === CloudId.SCLOUD) {
        ...
    } else if(cloudId === CloudId.NCLOUD) {
        ...
    } else if(cloudId === CloudId.DCLOUD) {
        ...
    }
}
```

ì´ë ‡ê²Œ í´ë¼ìš°ë“œ ì¢…ë¥˜ê°€ 3ê°œë§Œ ì¶”ê°€ ë˜ì—‡ì„ ë¿ì¸ë° ê° ê¸°ëŠ¥ì— ëŒ€í•œ ì¡°ê±´ë¬¸ ë¶„ê¸°ê°€ ë§ì•„ì§€ê²Œ ë˜ì–´ ì½”ë“œê°€ ë³µì¡í•˜ê²Œ ëœë‹¤.

![oop_6_image_1](/assets/images/posts/oop6_1.png)

ìœ„ì˜ ì½”ë“œëŠ” í´ë¼ìš°ë“œê°„ íŒŒì¼ ë³µì‚¬ì— ëŒ€í•œ ê¸°ëŠ¥ì„ if else ë¬¸ë§Œ í‘œê¸°í•œ ê²ƒì´ë‹¤.

ë‹¨ìˆœ ë³µì‚¬ ê¸°ëŠ¥ë§Œí•´ë„ ì´ë ‡ê²Œ ì¡°ê±´ë¬¸ì´ ë§ì„ì§„ë° í–¥í›„ ê¸°ëŠ¥ì´ ë‹¤ì–‘í•´ ì§„ë‹¤ë©´ ë¬¸ì œê°€ ë”ìš± ì»¤ì§„ë‹¤.

ì´ë ‡ë“¯ ì¶”ìƒí™”ê°€ ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì½”ë“œ êµ¬ì¡°ê°€ ê¸¸ì–´ì§€ê³  ë³µì¡í•´ì§ ë¿ë§Œ ì•„ë‹ˆë¼ ê´€ë ¨ ì½”ë“œê°€ ì—¬ëŸ¬ê³³ì— ë¶„ì‚°ë˜ë©° ê²°ê³¼ì ìœ¼ë¡œ ì½”ë“œì˜ ê°€ë…ì„±ê³¼ ë¶„ì„ ì†ë„ê°€ ì €í•˜ëœë‹¤.

ìµœì¢…ì ìœ¼ë¡œ ì„œë¹„ìŠ¤ê°€ ì§€ì†ë  ìˆ˜ë¡ ê°œë°œ ì‹œê°„ì€ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ëŠ˜ì–´ë‚˜ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ë¥¼ ë‘ë ¤ì›Œ í•˜ê²Œ ëœë‹¤.

ì¶”ìƒí™” í•œ ì½”ë“œ

```tsx
public class DropBoxFileSystem implements CloudFileSystem {
    private dbClient: DropBoxClient = new DropBoxClient(...);
	
    public getFiles(): CloudFile[] {
        const dbFiles: DbFile[] = dbClient.getFiles();
        const results: CloudFile[] = new Array(dbFiles.size());
        dbFiles.forEach(file => {
            const cf: DropBoxCloudFIle = new DropBoxCloudFile(file, dbClient);
            results.push(cf);
        })
    }
    return results;
}

// DropBoxCloudFile
public class DropBoxCloudFile implements CloudFile {	
    private dbClient: DropBoxClient;
    private dbFile: DbFile;
    constructor(
        dbClient: DropBoxClient;
        dbFile: DbFile;
    ) {
        this.dbFile = dbFile;
        this.dbClient = dbClient;
    }
    public getId(): string {
        return this.dbFile.getId();		
    }
    public hsUrl(): boolean {
        return true;
    }
    public getUrl(): string {
        return this.dbFile.getFileUrl();
    }
    public getName(): string {
        return this.dbFile.getFileName();		
    }
    public getInputStream(): InputStream {
        return this.dbClient.createStreamOfFile(dbFile);		
    }
    public write(out: OutputStream): void {
        ...
    }
    public delete(): void {
        dbClient.deleteFile(dbFile.getId());
    }
    ...
}

// File info ê°€ì ¸ì˜¤ëŠ” ë©”ì„œë“œ
public getFileInfos(cloudId: CloudId): CloudFile[] {
    const fileSystem: CloudFileSystem = 
        CloudFileSystemFactory.getFileSystem(cloudId);
    return fileSystem.getFiles();
}
public download(file: CloudFile, localTarget: File) {
    file.write(new FileOutputStream(localTarget));
}
```

![oop_6_image_2](/assets/images/posts/oop6_2.png)
<br>

![oop_6_image_3](/assets/images/posts/oop6_3.png)

```tsx
// íŒŒì¼ ë³µì‚¬ ê¸°ëŠ¥
public copy(file: CloudFile, target: CloudId) {
    // targetì„ ì´ìš©í•´ì„œ ê° íŒŒì¼ ì‹œìŠ¤í…œì„ ê°€ì ¸ì˜¨ ë’¤
    const fileSystem: CloudFileSystem = 
        CloudFileSystemFactory.getFileSystem(target);
    // ê° íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ì— ìˆëŠ” copyFrom í•¨ìˆ˜ë¥¼ í†µí•´ íŒŒì¼ì„ ë³µì‚¬
    fileSystem.copyFrom(file);
}
```

â†’ ê° íŒŒì¼ ì‹œìŠ¤í…œ ë‚´ì˜ `copyFrom` ë©”ì„œë“œ ì˜ˆ

![oop_6_image_4](/assets/images/posts/oop6_4.png)


:point_up: ì´ë ‡ê²Œ ì¶”ìƒí™”ë¥¼ í•˜ë©´ ì¶”ìƒí™”í•œ íƒ€ì…ìœ¼ë¡œë§Œ í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥
{: .notice--info}


![oop_6_image_5](/assets/images/posts/oop6_5.png)


:point_up: **OCP (Open-Closed Principle, ê°œë°© íì‡ ì˜ ì›ì¹™)**
<br> ìƒˆë¡œìš´ í´ë¼ìš°ë“œ ì§€ì› ì¶”ê°€ ê°€ëŠ¥(Open for Extension, í™•ì¥ì— ì—´ë ¤ìˆìŒ)
ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš” (Closed for Modification, ìˆ˜ì •ì—” ë‹«í˜€ìˆìŒ)
{: .notice--info}